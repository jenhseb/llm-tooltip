<a href="https://github.com/jenhseb/llm-tooltip">
  <svg
    role="img"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
    height={20}
    width={20}
  >
    <title>GitHub</title>
    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
  </svg>
</a>
<br />

# Quickstart

## Prerequisites

The library defaults to using OpenAI for LLM calls. Information on how to add other LLM provider (e.g. Anthropic) [here](#llm). Or open an issue in Github.

You need to add `OPENAI_API_KEY` as an environment variable pointing to your [OpenAI API Key](https://help.openai.com/en/articles/4936850-where-do-i-find-my-openai-api-key).

## Out of the Box - 3 Components Needed

1. `SmartToolTip`
2. `SmartToolTipProvider`
3. `SmartToolTipHelp`

Wrap your app in the `SmartToolTipProvider`:

```tsx dark
<SmartToolTipProvider>
  <App />
</SmartToolTipProvider>
```

And inside your app, wrap your components with the `SmartToolTip` component:

Add a `description` prop to the `SmartToolTip` component. This is internal-facing and will be sent to the LLM as context for the user's questions.

```tsx dark
<SmartToolTip description={"Click this button to open up a greeting."}>
  <Button onClick={() => alert("Hello")}>Click Me</Button>
</SmartToolTip>
```

Adding the `SmartToolTip` component will automatically add a chat tooltip to the component enabled on hover.

<div className="bg-neutral-800 p-1">

<img
  src="/stories/tool-tip.gif"
  width="500"
  className="m-auto border-1 border-neutral-400"
/>
</div>
And if you'd like to enable to the user to ask about any of the annotated items on the screen, you can add `SmartToolTipHelp` anywhere on the screen. This is a help button.

```tsx dark

...

<AppContainer>
  <SmartToolTip description={"Click this button to open up a greeting."}>
    <Button onClick={() => alert("Hello")}>Click Me</Button>
  </SmartToolTip>

  <SmartToolTip description={"Click this button to open up a farewell."}>
    <Button onClick={() => alert("Goodbye")}>Click Me</Button>
  </SmartToolTip>

  <SmartToolTipHelp />
</AppContainer>;
```

<div className="bg-neutral-800 p-1">
  <img
    src="/stories/page-help.gif"
    width="500"
    className="m-auto border-1 border-neutral-400"
  />
</div>

<br />

# Customization

## Custom Tip Components

**Doesn't have to be tooltip.**

These are the default components that are used to render the tooltip.

- Active
- Inactive
- Highlight

<div className="flex flex-row items-center justify-around gap-3">
  <span className="bg-neutral-800 p-1">
    <img src="/stories/ActiveToolTip.png" width="200" />
  </span>
  <span className="bg-neutral-800 p-1">
    <img src="/stories/InactiveToolTip.png" width="200" />
  </span>
  <span className="bg-neutral-800 p-1">
    <img
      src="/stories/HighlightToolTip.png"
      width="300"
      className="bg-white pt-1 pr-1 pb-1"
    />
  </span>
</div>

### Override the ToolTip Component

e.g...

- Maybe you'd prefer to use a modal instead of a tooltip for the chat window. Overwrite `Active`
- Maybe you'd prefer to add a border around the button to highlight it rather than pointing to it with a tooltip. Overwrite `Highlight`.

You can override any or all of these components by passing in your own components as long as they match the props of the default components.

```tsx dark

const CustomActive = (props: SmartToolTipActiveProps) =>{
   ...
}

const CustomInactive = (props: SmartToolTipInactiveProps) => {
    ...
}

const CustomHighlight = (props: SmartToolTipHighlightProps) => {
    ...
}

<SmartToolTip description={"Click this button to open up a greeting."} Active={CustomActive} Inactive={CustomInactive} Highlighted={CustomHighlight}>
  <Button onClick={() => alert("Hello")}>Click Me</Button>
</SmartToolTip>;
```

### Overwriting the ToolTip Content

Maybe you like the current tooltip/popover components, but want to implement your own content for the tooltip.

e.g.

- Maybe you'd like to style the Chat Window differently
- Maybe you'd like to display the activating hotkey differently
- Maybe you want the highlight components with a tooltip shaped like an arrow.

#### Overwriting the Active ToolTip Content

The default of this is the Chat Window.

```tsx dark
const CustomActiveContent = (props: ActiveToolTipContentProps) => {
    ...
}
const CustomActiveToolTip = (props: ActiveToolTipProps)=>{
    return <ActiveToolTip {...props} TipContent={<CustomActiveContent>}/>
}

...

<SmartToolTip description={"Click this button to open up a greeting."} Active={CustomActiveToolTip}>
  <Button onClick={() => alert("Hello")}>Click Me</Button>
</SmartToolTip>;
```

#### Overwriting the Active ToolTip Content

````tsx dark
const CustomInactiveContent = (props: InactiveToolTipContentProps) => {
    ...
}
const CustomInactiveToolTip = (props: InactiveToolTipProps)=>{
    return <InactiveToolTip {...props} TipContent={<CustomInactiveContent>}/>
}

```tsx dark
<SmartToolTip description={"Click this button to open up a greeting."} Inactive={CustomInactiveToolTip}>
  <Button onClick={() => alert("Hello")}>Click Me</Button>
</SmartToolTip>;
````

#### Overwriting the Highlight ToolTip Content

The default of this is the Chat Window.

````tsx dark

const CustomHighlightContent = (props: HighlightToolTipContentProps) => {
    ...
}
const CustomHighlightToolTip = (props: HighlightToolTipProps)=>{
    return <HighlightToolTip {...props} TipContent={<CustomHighlightContent>}/>
}

```tsx dark

<SmartToolTip description={"Click this button to open up a greeting."} Highlight={CustomHighlightToolTip}>
  <Button onClick={() => alert("Hello")}>Click Me</Button>
</SmartToolTip>;
````

## Custom LLM Model

<span id="llm" />

The current default LLM used is OpenAI `gpt-4o-mini`.

To override this, you can change the model here

```tsx dark
<SmartToolTipProvider model="gpt-10">
  <App />
</SmartToolTipProvider>
```

or change the LLM to a different provider that implements type `AskLLM`

```ts dark
const askAnthropic: AskLLM = (params) => {
    ....
}
```

Add it globally:

```tsx dark
<SmartToolTipProvider askLLM={askAnthropic}>
  <App />
</SmartToolTipProvider>
```

Or change it locally

```tsx dark
<SmartToolTip askLLM={askAnthropic}>
  <Button {...props} />
</SmartToolTip>
```

## Custom Prompts

- Prompts need adjusting for your app?
- Need to adjust the prompts for your [custom model](#llm)?
- Prompts not working as well expected?
  - Open up an issue on the Github page.
  - Try your hand at prompt engineering ðŸ’ª

Overwrite any or all of the params defined in type `ModelParams`

You can use the `PROMPT_DEFAULTS` to access the defaults, if you'd like to extend them rather than override them.

Add it globally:

```tsx dark
<SmartToolTipProvider
  system={"Custom system prompt"}
  history={[{ role: "user", content: "Answer in Spanish" }]}
  rejectUserMessage={"I can't answer that."}
>
  <App />
</SmartToolTipProvider>
```

Or change it locally

```tsx dark
<SmartToolTip
  system={"Custom system prompt"}
  history={[{ role: "user", content: "Answer in Spanish" }]}
  rejectUserMessage={"I can't answer that."}
>
  <Button {...props} />
</SmartToolTip>
```

### Advanced - Custom Tool Descriptions

You can overwrite the tool descriptions and names as well.

#### Tools Used

The library currently uses 2 tools:

- `ToolLLM.GetActive`:
  - _Description_: Returns the active `SmartToolTip`.
- `ToolLLM.ListAvailable`:
  - _Description_: Returns all `SmartToolTip`s currently rendered on screen.

Both return info about the respective `SmartToolTip`s to provide context to the LLM model.

#### Overriding Tool Descriptions

Add it globally

```tsx dark
<SmartToolTipProvider
  toolDetails={{
    [ToolLLM.GetActive]: {
      description: "Custom description",
      name: "Custom name",
    },
    [ToolLLM.ListAvailable]: {
      description: "Custom description",
      name: "Custom name",
    },
  }}
>
  <App />
</SmartToolTipProvider>
```

Or change it locally

```tsx dark
<SmartToolTip
  toolDetails={{
    [ToolLLM.GetActive]: {
      description: "Custom description",
      name: "Custom name",
    },
    [ToolLLM.ListAvailable]: {
      description: "Custom description",
      name: "Custom name",
    },
  }}
>
  <Button {...props} />
</SmartToolTip>
```

You can use the `PROMPT_DEFAULTS` to access the defaults, if you'd like to extend them rather than override them.

```tsx dark
<SmartToolTip
  toolDetails={{
    ...PROMPT_DEFAULTS.toolDetails,
    [ToolLLM.ListAvailable]: {
      description: "Custom description",
      name: "Custom name",
    },
  }}
>
  <Button {...props} />
</SmartToolTip>
```
